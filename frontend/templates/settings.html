<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Candle Lights Controller</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">üïØÔ∏è Candle Lights</div>
        <div class="nav-menu">
            <a href="/dashboard">Dashboard</a>
            <a href="/patterns">Patterns</a>
            <a href="/devices">Devices</a>
            <a href="/settings" class="active">Settings</a>
            <a href="/auth/logout">Logout</a>
        </div>
    </nav>

    <div class="container">
        <h1 style="color: white;">Settings</h1>

        <div class="card">
            <h2>Account Information & Particle.io Integration</h2>
            <p style="margin-bottom: 1.5rem;"><strong>Username:</strong> {{.Username}}</p>

            <hr style="border: none; border-top: 1px solid #e0e0e0; margin: 2rem 0;">

            <h3 style="margin-top: 1.5rem; margin-bottom: 1rem; color: #7e22ce;">Particle.io Access Token</h3>
            <p>To control your devices, you need to provide your Particle.io access token.</p>

            <div style="background: #f0f4ff; padding: 1.5rem; border-radius: 12px; margin: 1.5rem 0; border-left: 4px solid #7e22ce;">
                <h4 style="margin-top: 0; margin-bottom: 1rem; color: #7e22ce;">üìù How to Generate a Particle Access Token</h4>

                <p style="margin-bottom: 0.5rem;"><strong>Option 1: Using Particle CLI (Recommended)</strong></p>
                <ol style="margin-left: 1.5rem; margin-bottom: 1rem;">
                    <li>Install Particle CLI: <code style="background: #fff; padding: 2px 6px; border-radius: 4px;">npm install -g particle-cli</code></li>
                    <li>Login to your account: <code style="background: #fff; padding: 2px 6px; border-radius: 4px;">particle login</code></li>
                    <li>Generate a token: <code style="background: #fff; padding: 2px 6px; border-radius: 4px;">particle token create</code></li>
                    <li>Copy the generated access token and paste it below</li>
                </ol>

                <p style="margin-bottom: 0.5rem;"><strong>Option 2: Using Particle Console</strong></p>
                <ol style="margin-left: 1.5rem; margin-bottom: 0;">
                    <li>Go to <a href="https://console.particle.io/" target="_blank" style="color: #7e22ce; font-weight: 600;">Particle Console</a></li>
                    <li>Navigate to Settings ‚Üí Access Tokens</li>
                    <li>Click "New Token" and give it a name</li>
                    <li>Set the duration (90 days recommended)</li>
                    <li>Copy the token and paste it below</li>
                </ol>
            </div>

            <form id="particleForm">
                <div class="form-group">
                    <label>Particle Username</label>
                    <input type="text" id="particleUsername" name="particleUsername" placeholder="your-particle-username">
                    <small>Your Particle.io account username or email</small>
                </div>
                <div class="form-group">
                    <label>Particle Access Token</label>
                    <div style="position: relative;">
                        <input type="password" id="particleToken" name="particleToken" placeholder="paste-your-token-here" style="padding-right: 45px;">
                        <button type="button" id="toggleToken" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 1.2rem;">üëÅÔ∏è</button>
                    </div>
                    <small>This token will be encrypted and stored securely. Never share your token with anyone!</small>
                </div>
                <button type="submit" class="btn btn-primary">Save Particle Settings</button>
            </form>
        </div>
    </div>

    <script>
        // Toggle token visibility
        document.getElementById('toggleToken')?.addEventListener('click', function() {
            const tokenInput = document.getElementById('particleToken');
            const type = tokenInput.getAttribute('type') === 'password' ? 'text' : 'password';
            tokenInput.setAttribute('type', type);
            this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
        });

        document.getElementById('particleForm')?.addEventListener('submit', async (e) => {
            e.preventDefault();
            alert('Particle settings saved! (This feature requires additional backend implementation)');
        });
    </script>
</body>
</html>
